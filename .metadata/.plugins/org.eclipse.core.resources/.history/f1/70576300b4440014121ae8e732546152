package a03;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.nio.file.Files;
import java.nio.file.Paths;

public class Previewer {
	
	public void view(String _imagePath, String _resolution) throws IOException{
	
		String cmd = "avconv -loop 1 -i "+ _imagePath +" -t 00:00:10 -r 24 -s "+_resolution+" -y videoFromImage.mp4";
		ProcessBuilder Builder = new ProcessBuilder("/bin/bash","-c",cmd);
		Builder.redirectErrorStream(true);
		Process process = Builder.start();
		System.out.println("finish");
		String cmd2 = "avplay -i /home//namjun/Desktop/206/assign3//namjComeHere/vamix/videoFromImage.mp4";
		ProcessBuilder Builder2 = new ProcessBuilder("/bin/bash","-c",cmd2);
		Builder2.redirectErrorStream(true);
		Process process2 = Builder2.start();
		InputStream stdout = process.getInputStream();
		BufferedReader stdoutB = new BufferedReader(new InputStreamReader(stdout));
		String line = null;
		//print output from terminal to console
		while ((line = stdoutB.readLine()) != null) {
			System.out.println(line);
			
		}
		
		//Files.deleteIfExists(Paths.get("videoFromImage.mp4"));
	}
}
